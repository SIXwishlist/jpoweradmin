<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    template="layout/template.xhtml">
    
    <ui:define name="body">
        <h1>
        	<s:span>#{messages.ZoneRecordsFor} #{recordAction.domain.name}</s:span>
        </h1>
        
        <s:div styleClass="backLink">
        	<s:link view="/zones.xhtml" value="&#171; &nbsp; #{messages.BackToZones}">
        </s:link></s:div>

        <h:form>
	        <rich:dataTable id="recordsTable" var="record" value="#{records}" reRender="ds" rows="15" columnClasses="top,top,top,top" rendered="#{records.size > 0}" onRowMouseOver="this.style.backgroundColor='#F1F1F1'" onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'" width="100%;">
	        	<f:facet name="header">
	        		<rich:columnGroup>
	        			<rich:column colspan="9">
	        				<h:outputText value="#{messages.Records}" />
	        			</rich:column>
	        		</rich:columnGroup>
	        	</f:facet>
	        	
	        	<rich:column>
	        		<h:selectBooleanCheckbox value="#{selectedRecords[record]}" rendered="#{record.type != 'SOA'}"/>
	        	</rich:column>
	        	
	        	<rich:column>
	        		<f:facet name="header">
	        			<h:outputText value="#{messages.Action}" />
	        		</f:facet>
	        		
	        		<s:link value="#{messages.Edit}" view="/soa.xhtml" rendered="#{record.type == 'SOA'}"/>
					
					<s:link value="#{messages.Edit}" view="/record.xhtml" rendered="#{record.type != 'SOA'}">
						<f:param name="zone" value="#{recordAction.domain.name}"/>
					</s:link>
  		       	</rich:column>
	        	
	        	<rich:column sortable="true" sortBy="#{record.name}" width="30%;" filterBy="#{record.name}" filterEvent="onkeyup">
	        		<f:facet name="header">
	        			<h:outputText value="#{messages.Record}"/>
	        		</f:facet>
	        		<h:outputText value="#{record.name}" />
				</rich:column>
	        	
	        	<rich:column sortBy="#{record.type}">
	        		<f:facet name="header">
	        			<h:outputText value="#{messages.Type}" />
	        		</f:facet>
	        		<h:outputText value="#{record.type}" />
	        	</rich:column>
				
				<rich:column>
					<f:facet name="header">
						<h:outputText value="#{messages.Priority}" />
					</f:facet>
					<h:outputText value="#{record.prio}" />
				</rich:column>
				
				<rich:column sortBy="#{record.content}" width="30%">
					<f:facet name="header">
						<h:outputText value="#{messages.PointsTo}" />
					</f:facet>
					<h:outputText value="#{record.content}" />
				</rich:column>
				
				<rich:column width="50px;">
					<f:facet name="header">
						<h:outputText value="#{messages.TimeToLive}" />
					</f:facet>
					<h:outputText value="#{record.ttl}" />
				</rich:column>
				
				<rich:column sortBy="#{record.dateCreated}">
					<f:facet name="header">
						<h:outputText value="#{messages.DateCreated}" />
					</f:facet>
					<h:outputText value="#{record.dateCreated}">
						<s:convertDateTime type="both" dateStyle="medium" timeZone="#{timeZone}"/>
					</h:outputText>
				</rich:column>
	        	
	        	<rich:column sortBy="#{record.dateModified}">
					<f:facet name="header">
						<h:outputText value="#{messages.DateModified}" />
					</f:facet>
					<h:outputText value="#{record.dateModified}">
						<s:convertDateTime type="both" dateStyle="medium" timeZone="#{timeZone}"/>
					</h:outputText>
				</rich:column>
	        	
	        	<f:facet name="footer">
	        		<rich:datascroller id="ds" renderIfSinglePage="false"/>
	        	</f:facet>
	        </rich:dataTable>
	        <h:commandButton action="confirm" value="#{messages.DeleteSelected}" rendered="#{records.size > 0}"/>
		</h:form>
	
		<rich:panel rendered="#{records.size == 0}">
			#{messages.NoRecordWarning}
		</rich:panel>
	
		<rich:spacer width="1" height="25"></rich:spacer>
		<rich:separator lineType="solid" height="3" ></rich:separator>
		<rich:spacer width="1" height="25"></rich:spacer>
		
		<h:form>
		<rich:panel>
			<f:facet name="header">
				<h:outputText value="#{messages.CreateRecord}" />
			</f:facet>
				<h:panelGrid columns="1">
					
					<p><strong>#{messages.RecordHelpRecordName}</strong> #{messages.RecordHelpRecordDetail} <a class="external" target="display" href="http://doc.powerdns.com/types.html">#{messages.RecordHelpRecordTypes}</a>.</p>
				   	<p><strong>#{messages.RecordHelpRecordExample}</strong> <em>#{messages.RecordHelpRecordWWW}</em> #{messages.RecordHelpRecordOr} <em>#{messages.RecordHelpRecordURL}</em></p>
					
					<s:decorate id="recordNameField" template="layout/edit.xhtml">
						<ui:define name="label">#{messages.RecordName}</ui:define>
						<h:inputText id="recordName" value="#{record.name}" required="false"/>
					</s:decorate>
					
					<s:decorate id="recordTypeField" template="layout/edit.xhtml">
						<ui:define name="label">#{messages.RecordType}</ui:define>
						<h:selectOneMenu value="#{record.type}" required="true">
							<s:selectItems var="type" value="#{normalRecordTypes}" label="#{type}" />
						</h:selectOneMenu>
					</s:decorate>
					
					<s:decorate id="recordTTLField" template="layout/edit.xhtml">
						<ui:define name="label">#{messages.TimeToLive}</ui:define>
						<h:inputText id="recordTTL" value="#{record.ttl}" size="6"/>
					</s:decorate>

					<s:decorate id="recordPriorityField" template="layout/edit.xhtml">
						<ui:define name="label">#{messages.Priority}</ui:define>
						<h:inputText id="priority" value="#{record.prio}" size="6"/>
					</s:decorate>

					
					<s:decorate id="recordValueField" template="layout/edit.xhtml">
						<ui:define name="label">#{messages.RecordContent}</ui:define>
						<h:inputText id="recordValue" value="#{record.content}" required="true" />
					</s:decorate>		
				</h:panelGrid>
		</rich:panel>
		<h:commandButton value="#{messages.CreateRecord}" action="#{recordAction.addRecord(record)}"/>
		</h:form>
    </ui:define>
</ui:composition>
